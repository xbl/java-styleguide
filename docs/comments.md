## 注释规约

在 TW 的编码规范中是不推荐写注释的，原因很简单，只要让你觉得应该写注释的代码，那么就说明这段代码已经不能够表明含义了，我们应该花更多精力在在变量名和方法名上去让其能够“自解释”。其次，在实际的编码过程中我们会发现很多代码已经被修改，但是注释却没有修改的情况，这样的注释比没有注释更容易让人产生误导。

让人产生误导的注释：

```java
// 保存时间以秒为单位
saveTime(minutes)
  
// 如果是签约用户，更新用户信息
if (user.isSign) {
  insert(user);
}
```

当然，注释并非完全一无是处，在一些复杂算法和配置中注释会起着重要作用。与[命名规范](docs/naming.md)一样，我们期望注释描述的是业务含义，而非代码的直译。

<span style="color:red">反例</span>：

```java
for (String s: nameList) { // 这里是循环
  if ("".equals(s)) { // 这里是 if
    doSomething()
  }
} // 循环结束
```

在许多代码规范中要求在类声明、方法声明的注释中写上作者和创建时间，但是，本规范中并不建议这样做，原因有二：

1. 日期会因为业务变动需要更改，但是这里的注释很少真正被及时修改。
2. 程序员很多时候喜欢“复制、粘贴”，顺便就会将注释复制过来且不会修改。回想一下在我们 Code Review 的时候有多少同学会说“这是老代码，所以没改”、“这是我复制过来的...”。

所以我们建议在提交代码时将需求卡号和代码变更的内容描述清楚，见 Code Review 一章。

对于注释的要求：第一、能够描述业务含义，使别的程序员能够迅速了解到代码背后的信息。第二、能够准确反应设计思想和代码逻辑；

### 建议：

1. 类、类属性、类方法的注释建议使用Javadoc规范，使用 Javadoc 多行注释格式，而不是使用单行注释方式。 
  <br><span style="color:orange">说明</span>：在IDE编辑窗口中，Javadoc方式会提示相关注释，生成Javadoc可以正确输出相应注释；在IDE中，工程调用方法时，不进入方法即可悬浮提示方法、参数、返回值的意义，提高阅读效率。 

  <span style="color:red">反例</span>：

  ```java
  // 根据Id获取用户
  public User getUser(String userId);
  ```

  <span style="color:green">正例</span>：

  ```java
  /**
   * 根据id 获取用户
   * @param userId
   * @return 
   */
  public User getUser(String userId);
  ```
  

  
2. 代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻辑等的修改。 
   <br><span style="color:orange">说明</span>：代码与注释更新不同步，就像路网与导航软件更新不同步一样，如果导航软件严重滞后，就失去了导航的意义。 

3. 与其“半吊子”英文来注释，不如用中文注释把问题说清楚。专有名词与关键字保持英文原文即可。
   <br><span style="color:red">反例</span>：“TCP连接超时”解释成“传输控制协议连接超时”，理解反而费脑筋。 

4. 

5. 谨慎注释掉代码。如果无用，则删除。 
  <br><span style="color:orange">说明</span>：代码被注释掉有两种可能性：
  1）后续会恢复此段代码逻辑，如果需要恢复建议从提交历史中查看，而非注释。注释会导致其他同学不敢删除，则会被永久“烂”在代码中，影响代码阅读。
  2）永久不用。建议开发团队在看到注释掉的代码直接删掉（代码仓库保存了历史代码）。 

  